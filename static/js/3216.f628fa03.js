"use strict";(self["define"]=self["define"]||[]).push([[3216],{99877:function(){},35200:function(e,t,n){n.d(t,{zG:function(){return f}});var a=n(35512),s=n(19390),r=n(44847),l=n(7728),i=n(28341),o=n(63294),c=n(3146),u=n(40586);function p(){const e=(0,l.G)((()=>(console.log("[worker-macro] webpack"),new l.G(new URL(n.p+n.u(1584),n.b))))),t=(0,a.Ud)(e);return{worker:t,_worker:e}}function d(){const{worker:e,_worker:t}=p(),{worker:n,_worker:a}=p(),{scannerOnImage:l,scannerOnLine:d,recognizeAchievement:g}=e,{recognizeAchievement:f,scannerOnLine:m}=n;let v=(e,t)=>{};const w=e=>{v=e},y=e=>{throw v(-99),e};t.addEventListener("error",y),a.addEventListener("error",y);const h=(async()=>{try{const[t,a]=(0,r.LS)(),l=i.hasSIMD?"ort-wasm-simd.wasm":"ort-wasm.wasm",p=i.hasSIMD?"opencv-simd.wasm":"opencv-normal.wasm";await t,await(0,r.sB)([l,p,"ppocr.ort"],(e=>v(e)),a);const d=(0,u.Z)(c.ag.amos);await Promise.all([e.setResources(s.ZP),n.setResources(s.ZP),e.initAchievementMap(o["default"],d),n.initAchievementMap(o["default"],d)]),v(100)}catch(l){throw v(-1,l),l}t.removeEventListener("error",y),a.removeEventListener("error",y),await Promise.all([e.init(),n.init()])})();return{recognizeAchievement:f,recognizeAchievement2:g,scannerOnLine:m,scannerOnLine2:d,scannerOnImage:l,initPromise:h,workerCV:e,workerOCR:n,onProgress:w}}let g;function f(){return g||(g=d()),g}},77689:function(e,t,n){n.d(t,{l:function(){return s}});var a=n(29715);function s(e,t){return a.l(e,t,"achievement")}},28970:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var a=n(11135),s=(n(97519),n(782)),r=(n(94775),n(87674)),l=(n(89989),n(61583)),i=n(91239),o=n(17515);const c={key:0,class:"step1"},u=(0,l._)("span",null,[(0,l.Uk)("点击选择成就页面截图（支持多选）"),(0,l._)("br"),(0,l.Uk)("或拖动图片到这里")],-1),p={class:"list"},d=(0,l._)("p",null,[(0,l.Uk)(" 请上传完整的成就页面截图 "),(0,l._)("br"),(0,l.Uk)(" 如无法多选请更换浏览器 ")],-1),g={class:"image-content"},f=["src"],m={key:1,class:"step2"},v={class:"inline-status"};function w(e,t,n,w,y,h){const k=(0,l.up)("Loader"),_=(0,l.up)("fa-icon"),$=r.GT,S=s.Mr,C=a.Xh,x=(0,l.up)("float-content"),U=(0,l.Q2)("elloading");return(0,l.wg)(),(0,l.iD)("div",null,[e.load?((0,l.wg)(),(0,l.iD)("div",{key:1,class:(0,i.C_)(e.$style.listContainer)},[1===e.step?((0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("div",{class:"top",style:(0,i.j5)(e.images.length>0?{}:{padding:0})},[(0,l._)("div",{class:(0,i.C_)(["dropzone",{"drag-over":e.dragOver}]),onDragover:t[2]||(t[2]=(0,o.iM)((t=>e.dragOver=!0),["prevent","stop"])),onDragleave:t[3]||(t[3]=t=>e.dragOver=!1),onDrop:t[4]||(t[4]=(0,o.iM)(((...t)=>e.onFileDrop&&e.onFileDrop(...t)),["prevent","stop"])),onClick:t[5]||(t[5]=(...t)=>e.dropzoneClick&&e.dropzoneClick(...t))},[(0,l._)("i",null,[(0,l.Wm)(_,{icon:"inbox"})]),u,(0,l._)("input",{ref:"fileInput",multiple:"",class:"file-input",type:"file",accept:"image/*",onChange:t[1]||(t[1]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,544)],34),e.images.length>0?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:t[6]||(t[6]=t=>e.step++)},"识别")):(0,l.kq)("",!0)],4),(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",p,[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[e.images.length<=0?((0,l.wg)(),(0,l.j4)($,{key:0},{description:(0,l.w5)((()=>[d])),_:1})):(0,l.kq)("",!0),(0,l._)("div",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.images,(e=>((0,l.wg)(),(0,l.iD)("img",{key:e.id,src:e.src},null,8,f)))),128))])])),_:1})])),[[U,e.loading]])])):(0,l.kq)("",!0),2===e.step?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(C,{type:"circle",percentage:e.progress||0,format:e=>e.toFixed(2)+"%"},null,8,["percentage","format"]),(0,l._)("div",v,[(0,l.Wm)(x,{"in-float":!1,capture:!1,state:1,success:e.recognized.success,fail:e.recognized.fail,scanned:e.scanned,duplicate:e.dup},null,8,["success","fail","scanned","duplicate"])])])):(0,l.kq)("",!0)],2)):((0,l.wg)(),(0,l.j4)(k,{key:0,source:"achievement",instance:e.getScannerInstance,onDone:t[0]||(t[0]=t=>e.load=!0)},null,8,["instance"]))])}n(16329);var y=n(30926),h=n(96181),k=n(28341),_=n(35200),$=n(84876),S=n(2849),C=n(25083),x=(n(99877),n(1533)),U=n.n(x),b=n(92066),D=n(87860),F=n(41151),I=n(77689);$.vI.add(S.wK3);var z=(0,l.aZ)({components:{Loader:h.Z,FloatContent:F.Z},directives:{elloading:C.t},setup(){const e=(0,y.iH)(!1),t=(0,y.iH)(!1),n=(0,y.iH)(1);if(!k.ocrCompatible)return{step:-1,images:[],load:e,recognized:{success:0,fail:0},getScannerInstance:_.zG};const{scannerOnLine:a,scannerOnLine2:s,scannerOnImage:r}=(0,_.zG)(),i=(0,y.iH)(null),o=(0,y.iH)([]),c=(0,y.iH)(!1),u=()=>{i.value&&i.value.click()},p=e=>{if(!e.dataTransfer)return;c.value=!1;const t=e.dataTransfer.files;g(t)},d=e=>{const t=e.target.files;t&&g(t)},g=async e=>{o.value=[],t.value=!0;const n=Array.from(e).map(((e,t)=>{const n=new FileReader,a=new Promise((e=>{n.onload=()=>{const a=new Image;a.id="rcycle-img-"+t,a.onload=()=>{e(a)},a.src=n.result}}));return n.readAsDataURL(e),a}));o.value=await Promise.all(n),t.value=!1},f=(0,y.iH)([]),m=(0,y.iH)(0),v=(0,y.iH)(0),w=(0,l.Fl)((()=>({success:f.value.filter((e=>e.success)).length,fail:f.value.filter((e=>!e.success)).length}))),h=(0,l.Fl)((()=>(w.value.success+w.value.fail+m.value)/v.value*100));(0,l.YP)([o,w,m],(()=>{(0,I.l)("progress",{scanned:o.value.length,...w.value,dup:m.value})}));const $=(0,b.yj)(),S=(0,y.iH)(!1),C=async({image:e,thread:t})=>{if(!e)return;let n=a;t&&S.value&&(n=s);const r=await n(e);if(r.success){const t=f.value.find((e=>{if(!e.success)return!1;const t=e;return t.achievement.id===r.achievement.id}));r.done&&!$.query.withImage||(r.images={main:(0,D.rT)(e).toDataURL("image/webp")}),t?m.value++:f.value.push(r)}else r.images={main:(0,D.rT)(e).toDataURL("image/webp")},f.value.push(r),(new Image).src=r.images.main},x=U().promise(C,2),F=async e=>{const t=(0,D.eW)(e),n=await r(t,!0,!0),a=n.reduce(((e,t)=>e+t.image.rows),0);for(const s of n)s.image.rows>a/n.length*2/3&&(x.push({image:s.image,thread:v.value%2===0}),v.value++)},z=U().promise(F,1);async function L(){x.killAndDrain(),x.pause();let e=Promise.resolve();o.value.forEach((t=>{e=z.push(t)})),x.resume(),await e,S.value=!0,console.log("processing"),(0,I.l)("state","processing"),await x.push({image:null,thread:!1}),(0,I.l)("state","finish"),(0,I.l)("result",{result:f.value,dup:m.value,metadata:{scanner:"ScreenshotScanner",capturer:"ImageCapturer",ua:navigator.userAgent,w:0,h:0}})}return(0,l.YP)(n,(e=>{2===e&&L()})),{step:n,load:e,loading:t,onFileDrop:p,onFileChange:d,dropzoneClick:u,fileInput:i,dragOver:c,images:o,progress:h,recognized:w,results:f,dup:m,scanned:v,getScannerInstance:_.zG}}}),L={listContainer:"list-container-d28269"},N=n(14545);const B={};B["$style"]=L;const R=(0,N.Z)(z,[["render",w],["__cssModules",B]]);var G=R},87674:function(e,t,n){n.d(t,{GT:function(){return H}});n(23662);var a=n(61583),s=n(91239),r=n(30926),l=n(67311),i=n(66384);let o=0;const c=(0,a.aZ)({name:"ImgEmpty",setup(){const e=(0,i.s)("empty");return{ns:e,id:++o}}}),u={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},p=["id"],d=["stop-color"],g=["stop-color"],f=["id"],m=["stop-color"],v=["stop-color"],w=["id"],y={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},h={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},k={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},_=["fill"],$=["fill"],S={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},C=["fill"],x=["fill"],U=["fill"],b=["fill"],D=["fill"],F={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},I=["fill","xlink:href"],z=["fill","mask"],L=["fill"];function N(e,t,n,s,r,l){return(0,a.wg)(),(0,a.iD)("svg",u,[(0,a._)("defs",null,[(0,a._)("linearGradient",{id:`linearGradient-1-${e.id}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[(0,a._)("stop",{"stop-color":`var(${e.ns.cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,d),(0,a._)("stop",{"stop-color":`var(${e.ns.cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,g)],8,p),(0,a._)("linearGradient",{id:`linearGradient-2-${e.id}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[(0,a._)("stop",{"stop-color":`var(${e.ns.cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,m),(0,a._)("stop",{"stop-color":`var(${e.ns.cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,v)],8,f),(0,a._)("rect",{id:`path-3-${e.id}`,x:"0",y:"0",width:"17",height:"36"},null,8,w)]),(0,a._)("g",y,[(0,a._)("g",h,[(0,a._)("g",k,[(0,a._)("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${e.ns.cssVarBlockName("fill-color-3")})`},null,8,_),(0,a._)("polygon",{id:"Rectangle-Copy-14",fill:`var(${e.ns.cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,$),(0,a._)("g",S,[(0,a._)("polygon",{id:"Rectangle-Copy-10",fill:`var(${e.ns.cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,C),(0,a._)("polygon",{id:"Rectangle-Copy-11",fill:`var(${e.ns.cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,x),(0,a._)("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${e.id})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,U),(0,a._)("polygon",{id:"Rectangle-Copy-13",fill:`var(${e.ns.cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,b)]),(0,a._)("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${e.id})`,x:"13",y:"45",width:"40",height:"36"},null,8,D),(0,a._)("g",F,[(0,a._)("use",{id:"Mask",fill:`var(${e.ns.cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${e.id}`},null,8,I),(0,a._)("polygon",{id:"Rectangle-Copy",fill:`var(${e.ns.cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${e.id})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,z)]),(0,a._)("polygon",{id:"Rectangle-Copy-18",fill:`var(${e.ns.cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,L)])])])])}var B=(0,l.Z)(c,[["render",N],["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const R={image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}};var G=n(91525);const O=["src"],W={key:1},P={name:"ElEmpty"},V=(0,a.aZ)({...P,props:R,setup(e){const t=e,{t:n}=(0,G.bU)(),l=(0,i.s)("empty"),o=(0,a.Fl)((()=>t.description||n("el.table.emptyText"))),c=(0,a.Fl)((()=>({width:t.imageSize?`${t.imageSize}px`:""})));return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,s.C_)((0,r.SU)(l).b())},[(0,a._)("div",{class:(0,s.C_)((0,r.SU)(l).e("image")),style:(0,s.j5)((0,r.SU)(c))},[e.image?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.image,ondragstart:"return false"},null,8,O)):(0,a.WI)(e.$slots,"image",{key:1},(()=>[(0,a.Wm)(B)]))],6),(0,a._)("div",{class:(0,s.C_)((0,r.SU)(l).e("description"))},[e.$slots.description?(0,a.WI)(e.$slots,"description",{key:0}):((0,a.wg)(),(0,a.iD)("p",W,(0,s.zw)((0,r.SU)(o)),1))],2),e.$slots.default?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,s.C_)((0,r.SU)(l).e("bottom"))},[(0,a.WI)(e.$slots,"default")],2)):(0,a.kq)("v-if",!0)],2))}});var Z=(0,l.Z)(V,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]),j=n(6700);const H=(0,j.nz)(Z)},89989:function(e,t,n){n(75452)},11135:function(e,t,n){n.d(t,{Xh:function(){return _}});n(25766),n(65946);var a=n(61583),s=n(91239),r=n(30926),l=n(77707),i=n(8780),o=n(17398);const c=(0,o.o8)({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:(0,o.Cq)(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:(0,o.Cq)([String,Array,Function]),default:""},format:{type:(0,o.Cq)(Function),default:e=>`${e}%`}});var u=n(67311),p=n(66384);const d=["aria-valuenow"],g={viewBox:"0 0 100 100"},f=["d","stroke","stroke-width"],m=["d","stroke","opacity","stroke-linecap","stroke-width"],v={key:0},w={name:"ElProgress"},y=(0,a.aZ)({...w,props:c,setup(e){const t=e,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},o=(0,p.s)("progress"),c=(0,a.Fl)((()=>({width:`${t.percentage}%`,animationDuration:`${t.duration}s`,backgroundColor:F(t.percentage)}))),u=(0,a.Fl)((()=>(t.strokeWidth/t.width*100).toFixed(1))),w=(0,a.Fl)((()=>["circle","dashboard"].includes(t.type)?Number.parseInt(""+(50-Number.parseFloat(u.value)/2),10):0)),y=(0,a.Fl)((()=>{const e=w.value,n="dashboard"===t.type;return`\n          M 50 50\n          m 0 ${n?"":"-"}${e}\n          a ${e} ${e} 0 1 1 0 ${n?"-":""}${2*e}\n          a ${e} ${e} 0 1 1 0 ${n?"":"-"}${2*e}\n          `})),h=(0,a.Fl)((()=>2*Math.PI*w.value)),k=(0,a.Fl)((()=>"dashboard"===t.type?.75:1)),_=(0,a.Fl)((()=>{const e=-1*h.value*(1-k.value)/2;return`${e}px`})),$=(0,a.Fl)((()=>({strokeDasharray:`${h.value*k.value}px, ${h.value}px`,strokeDashoffset:_.value}))),S=(0,a.Fl)((()=>({strokeDasharray:`${h.value*k.value*(t.percentage/100)}px, ${h.value}px`,strokeDashoffset:_.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"}))),C=(0,a.Fl)((()=>{let e;return e=t.color?F(t.percentage):n[t.status]||n.default,e})),x=(0,a.Fl)((()=>"warning"===t.status?i.Rrw:"line"===t.type?"success"===t.status?i.yGk:i.K41:"success"===t.status?i.JrY:i.x8P)),U=(0,a.Fl)((()=>"line"===t.type?12+.4*t.strokeWidth:.111111*t.width+2)),b=(0,a.Fl)((()=>t.format(t.percentage)));function D(e){const t=100/e.length,n=e.map(((e,n)=>(0,s.HD)(e)?{color:e,percentage:(n+1)*t}:e));return n.sort(((e,t)=>e.percentage-t.percentage))}const F=e=>{var n;const{color:a}=t;if((0,s.mf)(a))return a(e);if((0,s.HD)(a))return a;{const t=D(a);for(const n of t)if(n.percentage>e)return n.color;return null==(n=t[t.length-1])?void 0:n.color}};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,s.C_)([(0,r.SU)(o).b(),(0,r.SU)(o).m(e.type),(0,r.SU)(o).is(e.status),{[(0,r.SU)(o).m("without-text")]:!e.showText,[(0,r.SU)(o).m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},["line"===e.type?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,s.C_)((0,r.SU)(o).b("bar"))},[(0,a._)("div",{class:(0,s.C_)((0,r.SU)(o).be("bar","outer")),style:(0,s.j5)({height:`${e.strokeWidth}px`})},[(0,a._)("div",{class:(0,s.C_)([(0,r.SU)(o).be("bar","inner"),{[(0,r.SU)(o).bem("bar","inner","indeterminate")]:e.indeterminate}]),style:(0,s.j5)((0,r.SU)(c))},[(e.showText||e.$slots.default)&&e.textInside?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,s.C_)((0,r.SU)(o).be("bar","innerText"))},[(0,a.WI)(e.$slots,"default",{percentage:e.percentage},(()=>[(0,a._)("span",null,(0,s.zw)((0,r.SU)(b)),1)]))],2)):(0,a.kq)("v-if",!0)],6)],6)],2)):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,s.C_)((0,r.SU)(o).b("circle")),style:(0,s.j5)({height:`${e.width}px`,width:`${e.width}px`})},[((0,a.wg)(),(0,a.iD)("svg",g,[(0,a._)("path",{class:(0,s.C_)((0,r.SU)(o).be("circle","track")),d:(0,r.SU)(y),stroke:`var(${(0,r.SU)(o).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":(0,r.SU)(u),fill:"none",style:(0,s.j5)((0,r.SU)($))},null,14,f),(0,a._)("path",{class:(0,s.C_)((0,r.SU)(o).be("circle","path")),d:(0,r.SU)(y),stroke:(0,r.SU)(C),fill:"none",opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":(0,r.SU)(u),style:(0,s.j5)((0,r.SU)(S))},null,14,m)]))],6)),!e.showText&&!e.$slots.default||e.textInside?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",{key:2,class:(0,s.C_)((0,r.SU)(o).e("text")),style:(0,s.j5)({fontSize:`${(0,r.SU)(U)}px`})},[(0,a.WI)(e.$slots,"default",{percentage:e.percentage},(()=>[e.status?((0,a.wg)(),(0,a.j4)((0,r.SU)(l.gn),{key:1},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,r.SU)(x))))])),_:1})):((0,a.wg)(),(0,a.iD)("span",v,(0,s.zw)((0,r.SU)(b)),1))]))],6))],10,d))}});var h=(0,u.Z)(y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]),k=n(6700);const _=(0,k.nz)(h)},97519:function(e,t,n){n(75452)}}]);
//# sourceMappingURL=3216.f628fa03.js.map