"use strict";(self["define"]=self["define"]||[]).push([[6197],{93341:function(e,a,l){l.r(a),l.d(a,{default:function(){return H}});var t=l(97397),r=(l(61110),l(90273)),i=(l(96266),l(72669)),d=(l(36855),l(55788),l(69424),l(6964)),s=(l(77864),l(13292)),n=(l(93316),l(29056)),u=(l(60388),l(89629),l(61583)),o=l(91239),c=l(17515);const v=(0,u._)("div",{class:"topbar"},null,-1),m=(0,u._)("span",{class:"desc"},"点击头像切换用户",-1),f=["src"],w={class:"user-name"},h={class:"user-id"},p=(0,u.Uk)("   添加 "),_={style:{"text-align":"right"}},g=["src"],y=["src"],U={class:"sel-uname"},C=(0,u.Uk)("保存");function k(e,a,l,k,W,V){const b=s.$Y,I=(0,u.up)("fa-icon"),x=n.mi,z=s.eI,D=d.EZ,E=r.nH,S=i.BT,$=i.km,M=r.ly,P=t.zd;return(0,u.wg)(),(0,u.iD)("section",{class:(0,o.C_)(e.$style.userManager)},[v,(0,u.Wm)(z,{ref:"datatable","highlight-current-row":"",data:e.allUsers,class:"account-table",onCurrentChange:e.handleCurrentChange},{default:(0,u.w5)((()=>[(0,u.Wm)(b,{prop:"id"},{header:(0,u.w5)((()=>[m])),default:(0,u.w5)((a=>[(0,u._)("img",{class:"table-avatar",src:e.characterIcon(a.row.avatar)},null,8,f),(0,u._)("div",w,(0,o.zw)(a.row.name),1),(0,u._)("div",h,(0,o.zw)(a.row.id),1)])),_:1}),(0,u.Wm)(b,{width:"120px"},{header:(0,u.w5)((()=>[(0,u.Wm)(x,{class:"add-button",type:"primary",plain:"",style:{float:"right"},onClick:e.addUser},{default:(0,u.w5)((()=>[(0,u.Wm)(I,{icon:"plus"}),p])),_:1},8,["onClick"])])),default:(0,u.w5)((a=>[(0,u._)("div",_,[(0,u.Wm)(x,{style:{width:"35px"},onClick:(0,c.iM)((l=>e.editUser(a.row)),["prevent","stop"])},{default:(0,u.w5)((()=>[(0,u.Wm)(I,{icon:"pen-to-square"})])),_:2},1032,["onClick"]),e.allUsers.length>1?((0,u.wg)(),(0,u.j4)(x,{key:0,type:"danger",style:{width:"35px","margin-left":"2px"},plain:"",onClick:(0,c.iM)((l=>e.delUser(a.row)),["prevent","stop"])},{default:(0,u.w5)((()=>[(0,u.Wm)(I,{icon:"trash-can"})])),_:2},1032,["onClick"])):(0,u.kq)("",!0)])])),_:1})])),_:1},8,["data","onCurrentChange"]),(0,u.Wm)(P,{modelValue:e.edit.show,"onUpdate:modelValue":a[3]||(a[3]=a=>e.edit.show=a),"custom-class":"edit-drawer",size:320,title:(e.edit.edit?"编辑":"添加")+"账号","append-to-body":!1,"z-index":900,"destroy-on-close":""},{default:(0,u.w5)((()=>[(0,u.Wm)(M,{"label-position":"left","label-width":"auto"},{default:(0,u.w5)((()=>[(0,u.Wm)(E,{label:"UID"},{default:(0,u.w5)((()=>[(0,u.Wm)(D,{modelValue:e.edit.id,"onUpdate:modelValue":a[0]||(a[0]=a=>e.edit.id=a),placeholder:"100000....",size:"large"},null,8,["modelValue"])])),_:1}),(0,u.Wm)(E,{label:"名称"},{default:(0,u.w5)((()=>[(0,u.Wm)(D,{modelValue:e.edit.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.edit.name=a),placeholder:"爷真可爱",size:"large"},null,8,["modelValue"])])),_:1}),(0,u.Wm)(E,{label:"头像"},{default:(0,u.w5)((()=>[(0,u.Wm)($,{modelValue:e.edit.avatar,"onUpdate:modelValue":a[2]||(a[2]=a=>e.edit.avatar=a),size:"large",filterable:"",class:(0,o.C_)(e.$style.avatarSel)},{prefix:(0,u.w5)((()=>[(0,u._)("div",{class:(0,o.C_)(e.$style.avatarSelPrefix)},[(0,u._)("img",{src:e.characterIcon(e.edit.avatar)},null,8,g)],2)])),default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(e.characterAmos,(a=>((0,u.wg)(),(0,u.j4)(S,{key:a.key,value:a.key,label:e.i18n.amos[a.name],class:(0,o.C_)(e.$style.userSelectorItem)},{default:(0,u.w5)((()=>[(0,u._)("img",{src:e.characterIcon(a.key)},null,8,y),(0,u._)("span",U,(0,o.zw)(e.i18n.amos[a.name]),1)])),_:2},1032,["value","label","class"])))),128))])),_:1},8,["modelValue","class"])])),_:1})])),_:1}),(0,u.Wm)(x,{type:"primary",size:"large",style:{width:"100%"},onClick:e.saveForm},{default:(0,u.w5)((()=>[C])),_:1},8,["onClick"])])),_:1},8,["modelValue","title"])],2)}l(25766);var W=l(99113),V=l(3146),b=l(30926),I=l(19928),x=l(84876),z=l(2849),D=l(12983),E=l(10803),S=l(65015);x.vI.add(z.r8p,z.Yai,z.Vui);var $=(0,u.aZ)({setup(){const e=(0,b.iH)(null);(0,u.YP)([e,W.ar],(()=>{var a;null===(a=e.value)||void 0===a||a.setCurrentRow(W.XE.value.find((e=>e.id===W.ar.value)))}));const a=e=>{l.value.show||e&&e.id&&e.id!==W.ar.value&&(W.ar.value=e.id)},l=(0,b.iH)({show:!1,edit:"",id:"",name:"",avatar:"PlayerGirl"});function t(){l.value={show:!0,edit:"",id:"",name:"",avatar:"PlayerGirl"}}function r(e){l.value={show:!0,edit:e.id,id:e.id,name:e.name,avatar:e.avatar}}function i(){if(["options","currentUser","cocogoat"].includes(l.value.id)||l.value.id.includes("/")||l.value.id.includes("\\")||l.value.id.includes(" "))return void I.T.alert("UID 不合适","出错了");if(!l.value.edit){if(W.XE.value.find((e=>e.id===l.value.id)))return void I.T.alert("UID 重复","出错了");const e=(0,W.Vv)();return e.user.name=l.value.name,e.user.avatar=l.value.avatar,(0,D.t8)(l.value.id,e),(0,W.hk)(),void(l.value.show=!1)}if(l.value.edit!==l.value.id){if(W.XE.value.find((e=>e.id===l.value.id)))return void I.T.alert("UID 重复","出错了");const e=(0,D.U2)(l.value.edit);(0,D.IV)(l.value.edit),(0,D.t8)(l.value.id,e)}const e=(0,D.U2)(l.value.id);e.user.name=l.value.name,e.user.avatar=l.value.avatar,(0,D.t8)(l.value.id,e),(0,W.hk)(),W.ar.value===l.value.edit&&(W.ar.value=l.value.id),l.value.show=!1}async function d(e){try{await I.T.confirm("真的要删除吗？","提示")}catch(a){return}e.id===W.ar.value&&(W.ar.value=W.XE.value[0].id),(0,D.IV)(e.id),(0,W.hk)()}return{i18n:V.ag,allUsers:W.XE,currentUser:W.ar,characterIcon:E.L,datatable:e,handleCurrentChange:a,addUser:t,editUser:r,delUser:d,edit:l,saveForm:i,characterAmos:S.Z}}}),M={userSelectorItem:"user-selector-item-a1c68a",userManager:"user-manager-af1dcf",avatarSel:"avatar-sel-adeaa5",avatarSelPrefix:"avatar-sel-prefix-a83f9c"},P=l(14545);const T={};T["$style"]=M;const X=(0,P.Z)($,[["render",k],["__cssModules",T]]);var H=X},77864:function(e,a,l){l(1759)}}]);
//# sourceMappingURL=6197.a8d3c973.js.map