"use strict";(self["define"]=self["define"]||[]).push([[8970],{99877:function(){},29715:function(e,t,n){n.d(t,{l:function(){return a}});n(43928);function a(e,t,n){parent&&window!==parent&&parent.postMessage({app:"cocogoat.scanner."+n,event:e,data:JSON.parse(JSON.stringify(t))},"*")}},35200:function(e,t,n){n.d(t,{zG:function(){return m}});var a=n(35512),s=n(19390),l=n(44847),r=n(7728),i=n(28341),o=n(63294),c=n(3146),u=n(40586);function p(){const e=(0,r.G)((()=>(console.log("[worker-macro] webpack"),new r.G(new URL(n.p+n.u(1584),n.b))))),t=(0,a.Ud)(e);return{worker:t,_worker:e}}function d(){const{worker:e,_worker:t}=p(),{worker:n,_worker:a}=p(),{scannerOnImage:r,scannerOnLine:d,recognizeAchievement:f}=e,{recognizeAchievement:m,scannerOnLine:g}=n;let v=(e,t)=>{};const y=e=>{v=e},w=e=>{throw v(-99),e};t.addEventListener("error",w),a.addEventListener("error",w);const h=(async()=>{try{const[t,a]=(0,l.LS)(),r=i.hasSIMD?"ort-wasm-simd.wasm":"ort-wasm.wasm",p=i.hasSIMD?"opencv-simd.wasm":"opencv-normal.wasm";await t,await(0,l.sB)([r,p,"ppocr.ort"],(e=>v(e)),a);const d=(0,u.Z)(c.ag.amos);await Promise.all([e.setResources(s.ZP),n.setResources(s.ZP),e.initAchievementMap(o["default"],d),n.initAchievementMap(o["default"],d)]),v(100)}catch(r){throw v(-1,r),r}t.removeEventListener("error",w),a.removeEventListener("error",w),await Promise.all([e.init(),n.init()])})();return{recognizeAchievement:m,recognizeAchievement2:f,scannerOnLine:g,scannerOnLine2:d,scannerOnImage:r,initPromise:h,workerCV:e,workerOCR:n,onProgress:y}}let f;function m(){return f||(f=d()),f}},77689:function(e,t,n){n.d(t,{l:function(){return s}});var a=n(29715);function s(e,t){return a.l(e,t,"achievement")}},83088:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var a=n(11135),s=(n(97519),n(87674)),l=(n(89989),n(61583)),r=n(91239),i=n(17515);const o={key:0,class:"step1"},c=(0,l._)("span",null,[(0,l.Uk)("拖动第三方工具导出的图片集到这里"),(0,l._)("br"),(0,l.Uk)("或点击选择文件（支持多选）")],-1),u={class:"list"},p=["src"],d={key:1,class:"step2"},f={class:"inline-status"};function m(e,t,n,m,g,v){const y=(0,l.up)("fa-icon"),w=s.GT,h=(0,l.up)("DynamicScrollerItem"),k=(0,l.up)("DynamicScroller"),_=a.Xh,S=(0,l.up)("float-content"),$=(0,l.Q2)("elloading");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",{class:(0,r.C_)(e.$style.listContainer)},[1===e.step?((0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",{class:"top",style:(0,r.j5)(e.images.length>0?{}:{padding:0})},[(0,l._)("div",{class:(0,r.C_)(["dropzone",{"drag-over":e.dragOver}]),onDragover:t[1]||(t[1]=(0,i.iM)((t=>e.dragOver=!0),["prevent","stop"])),onDragleave:t[2]||(t[2]=t=>e.dragOver=!1),onDrop:t[3]||(t[3]=(0,i.iM)(((...t)=>e.onFileDrop&&e.onFileDrop(...t)),["prevent","stop"])),onClick:t[4]||(t[4]=(...t)=>e.dropzoneClick&&e.dropzoneClick(...t))},[(0,l._)("i",null,[(0,l.Wm)(y,{icon:"inbox"})]),c,(0,l._)("input",{ref:"fileInput",multiple:"",class:"file-input",type:"file",accept:"image/*",onChange:t[0]||(t[0]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,544)],34),e.images.length>0?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:t[5]||(t[5]=t=>e.step++)},"识别")):(0,l.kq)("",!0)],4),(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",u,[(0,l.Wm)(k,{items:e.images,"min-item-size":52,"custom-scrollbar":e.CustomElScrollVue,class:"scroller","key-field":"id"},{before:(0,l.w5)((()=>[e.images.length<=0?((0,l.wg)(),(0,l.j4)(w,{key:0,description:"请添加图片"})):(0,l.kq)("",!0)])),default:(0,l.w5)((({item:e,active:t})=>[(0,l.Wm)(h,{item:e,active:t,"size-dependencies":[]},{default:(0,l.w5)((()=>[(0,l._)("img",{src:e.src},null,8,p)])),_:2},1032,["item","active"])])),_:1},8,["items","custom-scrollbar"])])),[[$,e.loading]])])):(0,l.kq)("",!0),2===e.step?((0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(_,{type:"circle",percentage:e.progress,format:e=>e.toFixed(2)+"%"},null,8,["percentage","format"]),(0,l._)("div",f,[(0,l.Wm)(S,{"in-float":!1,capture:!1,state:1,success:e.recognized.success,fail:e.recognized.fail,scanned:e.images.length,duplicate:e.dup},null,8,["success","fail","scanned","duplicate"])])])):(0,l.kq)("",!0)],2)])}var g=n(30926),v=n(28341),y=n(35200),w=n(30824),h=n(49847),k=n(84876),_=n(2849),S=n(25083),$=(n(99877),n(1533)),C=n.n($),x=n(92066),b=n(87860),U=n(41151),D=n(77689);k.vI.add(_.wK3);var F=(0,l.aZ)({components:{FloatContent:U.Z,DynamicScroller:h.cV,DynamicScrollerItem:h.Wk},directives:{elloading:S.t},setup(){const e=(0,g.iH)(!1),t=(0,g.iH)(!1),n=(0,g.iH)(1);if(!v.ocrCompatible)return{load:e,step:0,recognized:{success:0,fail:0},images:[]};const a=(0,g.iH)(null),s=(0,g.iH)([]),r=(0,g.iH)(!1),i=()=>{a.value&&a.value.click()},o=e=>{if(!e.dataTransfer)return;r.value=!1;const t=e.dataTransfer.files;u(t)},c=e=>{const t=e.target.files;t&&u(t)},u=async e=>{s.value=[],t.value=!0;const n=Array.from(e).map(((e,t)=>{const n=new FileReader;return n.readAsDataURL(e),new Promise((e=>{n.onload=()=>{const a=new Image;a.src=n.result,a.id="rcycle-img-"+t,a.onload=()=>{e(a)}}}))}));s.value=await Promise.all(n),t.value=!1},p=(0,g.iH)([]),d=(0,g.iH)(0),f=(0,l.Fl)((()=>({success:p.value.filter((e=>e.success)).length,fail:p.value.filter((e=>!e.success)).length}))),m=(0,l.Fl)((()=>(f.value.success+f.value.fail+d.value)/s.value.length*100));(0,l.YP)([s,f,d],(()=>{(0,D.l)("progress",{scanned:s.value.length,...f.value,dup:d.value})}));const h=(0,x.yj)(),k=async({image:e,thread:t})=>{let n=$;t&&(n=U);const a=await(0,b.eW)(e),s=await n(a);if(s.success){const t=p.value.find((e=>{if(!e.success)return!1;const t=e;return t.achievement.id===s.achievement.id}));s.done&&!h.query.withImage||(s.images={main:e.src}),t?d.value++:p.value.push(s)}else s.images={main:e.src},p.value.push(s),(new Image).src=s.images.main},_=C().promise(k,2);async function S(){_.killAndDrain(),_.pause();let e=Promise.resolve();s.value.forEach(((t,n)=>{e=_.push({image:t,thread:n%2===0})})),_.resume(),await e,(0,D.l)("state","finish"),(0,D.l)("result",{result:p.value,dup:d.value,metadata:{ua:navigator.userAgent,scanner:"LineScanner"}})}(0,l.YP)(n,(e=>{2===e&&S()}));const{scannerOnLine:$,scannerOnLine2:U}=(0,y.zG)();return{step:n,load:e,loading:t,onFileDrop:o,onFileChange:c,dropzoneClick:i,fileInput:a,dragOver:r,CustomElScrollVue:w.Z,images:s,progress:m,recognized:f,results:p,dup:d}}}),z={listContainer:"list-container-a866fd"},I=n(14545);const N={};N["$style"]=z;const B=(0,I.Z)(F,[["render",m],["__cssModules",N]]);var L=B},87674:function(e,t,n){n.d(t,{GT:function(){return M}});n(23662);var a=n(61583),s=n(91239),l=n(30926),r=n(67311),i=n(66384);let o=0;const c=(0,a.aZ)({name:"ImgEmpty",setup(){const e=(0,i.s)("empty");return{ns:e,id:++o}}}),u={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},p=["id"],d=["stop-color"],f=["stop-color"],m=["id"],g=["stop-color"],v=["stop-color"],y=["id"],w={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},h={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},k={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},_=["fill"],S=["fill"],$={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},C=["fill"],x=["fill"],b=["fill"],U=["fill"],D=["fill"],F={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},z=["fill","xlink:href"],I=["fill","mask"],N=["fill"];function B(e,t,n,s,l,r){return(0,a.wg)(),(0,a.iD)("svg",u,[(0,a._)("defs",null,[(0,a._)("linearGradient",{id:`linearGradient-1-${e.id}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[(0,a._)("stop",{"stop-color":`var(${e.ns.cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,d),(0,a._)("stop",{"stop-color":`var(${e.ns.cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,f)],8,p),(0,a._)("linearGradient",{id:`linearGradient-2-${e.id}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[(0,a._)("stop",{"stop-color":`var(${e.ns.cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,g),(0,a._)("stop",{"stop-color":`var(${e.ns.cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,v)],8,m),(0,a._)("rect",{id:`path-3-${e.id}`,x:"0",y:"0",width:"17",height:"36"},null,8,y)]),(0,a._)("g",w,[(0,a._)("g",h,[(0,a._)("g",k,[(0,a._)("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${e.ns.cssVarBlockName("fill-color-3")})`},null,8,_),(0,a._)("polygon",{id:"Rectangle-Copy-14",fill:`var(${e.ns.cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,S),(0,a._)("g",$,[(0,a._)("polygon",{id:"Rectangle-Copy-10",fill:`var(${e.ns.cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,C),(0,a._)("polygon",{id:"Rectangle-Copy-11",fill:`var(${e.ns.cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,x),(0,a._)("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${e.id})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,b),(0,a._)("polygon",{id:"Rectangle-Copy-13",fill:`var(${e.ns.cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,U)]),(0,a._)("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${e.id})`,x:"13",y:"45",width:"40",height:"36"},null,8,D),(0,a._)("g",F,[(0,a._)("use",{id:"Mask",fill:`var(${e.ns.cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${e.id}`},null,8,z),(0,a._)("polygon",{id:"Rectangle-Copy",fill:`var(${e.ns.cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${e.id})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,I)]),(0,a._)("polygon",{id:"Rectangle-Copy-18",fill:`var(${e.ns.cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,N)])])])])}var L=(0,r.Z)(c,[["render",B],["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const V={image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}};var W=n(91525);const O=["src"],R={key:1},G={name:"ElEmpty"},P=(0,a.aZ)({...G,props:V,setup(e){const t=e,{t:n}=(0,W.bU)(),r=(0,i.s)("empty"),o=(0,a.Fl)((()=>t.description||n("el.table.emptyText"))),c=(0,a.Fl)((()=>({width:t.imageSize?`${t.imageSize}px`:""})));return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,s.C_)((0,l.SU)(r).b())},[(0,a._)("div",{class:(0,s.C_)((0,l.SU)(r).e("image")),style:(0,s.j5)((0,l.SU)(c))},[e.image?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.image,ondragstart:"return false"},null,8,O)):(0,a.WI)(e.$slots,"image",{key:1},(()=>[(0,a.Wm)(L)]))],6),(0,a._)("div",{class:(0,s.C_)((0,l.SU)(r).e("description"))},[e.$slots.description?(0,a.WI)(e.$slots,"description",{key:0}):((0,a.wg)(),(0,a.iD)("p",R,(0,s.zw)((0,l.SU)(o)),1))],2),e.$slots.default?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,s.C_)((0,l.SU)(r).e("bottom"))},[(0,a.WI)(e.$slots,"default")],2)):(0,a.kq)("v-if",!0)],2))}});var Z=(0,r.Z)(P,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]),j=n(6700);const M=(0,j.nz)(Z)},89989:function(e,t,n){n(75452)},11135:function(e,t,n){n.d(t,{Xh:function(){return _}});n(25766),n(65946);var a=n(61583),s=n(91239),l=n(30926),r=n(77707),i=n(8780),o=n(17398);const c=(0,o.o8)({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:(0,o.Cq)(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:(0,o.Cq)([String,Array,Function]),default:""},format:{type:(0,o.Cq)(Function),default:e=>`${e}%`}});var u=n(67311),p=n(66384);const d=["aria-valuenow"],f={viewBox:"0 0 100 100"},m=["d","stroke","stroke-width"],g=["d","stroke","opacity","stroke-linecap","stroke-width"],v={key:0},y={name:"ElProgress"},w=(0,a.aZ)({...y,props:c,setup(e){const t=e,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},o=(0,p.s)("progress"),c=(0,a.Fl)((()=>({width:`${t.percentage}%`,animationDuration:`${t.duration}s`,backgroundColor:F(t.percentage)}))),u=(0,a.Fl)((()=>(t.strokeWidth/t.width*100).toFixed(1))),y=(0,a.Fl)((()=>["circle","dashboard"].includes(t.type)?Number.parseInt(""+(50-Number.parseFloat(u.value)/2),10):0)),w=(0,a.Fl)((()=>{const e=y.value,n="dashboard"===t.type;return`\n          M 50 50\n          m 0 ${n?"":"-"}${e}\n          a ${e} ${e} 0 1 1 0 ${n?"-":""}${2*e}\n          a ${e} ${e} 0 1 1 0 ${n?"":"-"}${2*e}\n          `})),h=(0,a.Fl)((()=>2*Math.PI*y.value)),k=(0,a.Fl)((()=>"dashboard"===t.type?.75:1)),_=(0,a.Fl)((()=>{const e=-1*h.value*(1-k.value)/2;return`${e}px`})),S=(0,a.Fl)((()=>({strokeDasharray:`${h.value*k.value}px, ${h.value}px`,strokeDashoffset:_.value}))),$=(0,a.Fl)((()=>({strokeDasharray:`${h.value*k.value*(t.percentage/100)}px, ${h.value}px`,strokeDashoffset:_.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"}))),C=(0,a.Fl)((()=>{let e;return e=t.color?F(t.percentage):n[t.status]||n.default,e})),x=(0,a.Fl)((()=>"warning"===t.status?i.Rrw:"line"===t.type?"success"===t.status?i.yGk:i.K41:"success"===t.status?i.JrY:i.x8P)),b=(0,a.Fl)((()=>"line"===t.type?12+.4*t.strokeWidth:.111111*t.width+2)),U=(0,a.Fl)((()=>t.format(t.percentage)));function D(e){const t=100/e.length,n=e.map(((e,n)=>(0,s.HD)(e)?{color:e,percentage:(n+1)*t}:e));return n.sort(((e,t)=>e.percentage-t.percentage))}const F=e=>{var n;const{color:a}=t;if((0,s.mf)(a))return a(e);if((0,s.HD)(a))return a;{const t=D(a);for(const n of t)if(n.percentage>e)return n.color;return null==(n=t[t.length-1])?void 0:n.color}};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,s.C_)([(0,l.SU)(o).b(),(0,l.SU)(o).m(e.type),(0,l.SU)(o).is(e.status),{[(0,l.SU)(o).m("without-text")]:!e.showText,[(0,l.SU)(o).m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},["line"===e.type?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,s.C_)((0,l.SU)(o).b("bar"))},[(0,a._)("div",{class:(0,s.C_)((0,l.SU)(o).be("bar","outer")),style:(0,s.j5)({height:`${e.strokeWidth}px`})},[(0,a._)("div",{class:(0,s.C_)([(0,l.SU)(o).be("bar","inner"),{[(0,l.SU)(o).bem("bar","inner","indeterminate")]:e.indeterminate}]),style:(0,s.j5)((0,l.SU)(c))},[(e.showText||e.$slots.default)&&e.textInside?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,s.C_)((0,l.SU)(o).be("bar","innerText"))},[(0,a.WI)(e.$slots,"default",{percentage:e.percentage},(()=>[(0,a._)("span",null,(0,s.zw)((0,l.SU)(U)),1)]))],2)):(0,a.kq)("v-if",!0)],6)],6)],2)):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,s.C_)((0,l.SU)(o).b("circle")),style:(0,s.j5)({height:`${e.width}px`,width:`${e.width}px`})},[((0,a.wg)(),(0,a.iD)("svg",f,[(0,a._)("path",{class:(0,s.C_)((0,l.SU)(o).be("circle","track")),d:(0,l.SU)(w),stroke:`var(${(0,l.SU)(o).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":(0,l.SU)(u),fill:"none",style:(0,s.j5)((0,l.SU)(S))},null,14,m),(0,a._)("path",{class:(0,s.C_)((0,l.SU)(o).be("circle","path")),d:(0,l.SU)(w),stroke:(0,l.SU)(C),fill:"none",opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":(0,l.SU)(u),style:(0,s.j5)((0,l.SU)($))},null,14,g)]))],6)),!e.showText&&!e.$slots.default||e.textInside?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("div",{key:2,class:(0,s.C_)((0,l.SU)(o).e("text")),style:(0,s.j5)({fontSize:`${(0,l.SU)(b)}px`})},[(0,a.WI)(e.$slots,"default",{percentage:e.percentage},(()=>[e.status?((0,a.wg)(),(0,a.j4)((0,l.SU)(r.gn),{key:1},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,l.SU)(x))))])),_:1})):((0,a.wg)(),(0,a.iD)("span",v,(0,s.zw)((0,l.SU)(U)),1))]))],6))],10,d))}});var h=(0,u.Z)(w,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]),k=n(6700);const _=(0,k.nz)(h)},97519:function(e,t,n){n(75452)}}]);
//# sourceMappingURL=8970.66c2e9d3.js.map