"use strict";(self["define"]=self["define"]||[]).push([[8691],{87860:function(e,t,n){n.d(t,{Q8:function(){return a},Tj:function(){return r},eW:function(){return o},iD:function(){return s},rT:function(){return i}});n(670),n(80426),n(49743),n(36826),n(26263),n(77253);function r(e){return!("object"!==typeof e||!e||!("type"in e)||"number"!==typeof e.type||"undefined"!==typeof e.clone)}function a(e){return{rows:e.height,cols:e.width,type:24,data:new Uint8Array(e.data)}}function o(e){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");if(!n)throw new Error('canvas.getContext("2d") failed');return n.drawImage(e,0,0),a(n.getImageData(0,0,e.width,e.height))}function s(e){const t=e.getContext("2d");if(!t)throw new Error('canvas.getContext("2d") failed');return a(t.getImageData(0,0,e.width,e.height))}function i(e){if(24!==e.type)throw new Error(`Converting type ${e.type} to canvas faild. Only CV_8UC4 is supported.`);const t=document.createElement("canvas");t.width=e.cols,t.height=e.rows;const n=t.getContext("2d");if(!n)throw new Error("Could not get context");const r=n.createImageData(e.cols,e.rows);return r.data.set(e.data),n.putImageData(r,0,0),t}},13042:function(e,t,n){n.d(t,{zG:function(){return w}});var r=n(35512),a=n(19390),o=n(44847),s=n(7728),i=n(28341),c=n(3146),u=n(65015),d=n(97939),f=n(87860),l=n(40586);function p(){const e=(0,s.G)((()=>(console.log("[worker-macro] webpack"),new s.G(new URL(n.p+n.u(1168),n.b))))),t=(0,r.Ud)(e);return{worker:t,_worker:e}}function m(){const{worker:e,_worker:t}=p(),{worker:n,_worker:r}=p(),{onScreenShot:s,diffCached:m,diffCachedA:h,diffAB:w}=e,{onScreenShot:g}=n;let y=e=>{};const v=e=>{y=e},E=e=>{throw y(-99),e};t.addEventListener("error",E),r.addEventListener("error",E);const S=(async()=>{try{const[t,r]=(0,o.LS)(),s=i.hasSIMD?"ort-wasm-simd.wasm":"ort-wasm.wasm",f=i.hasSIMD?"opencv-simd.wasm":"opencv-normal.wasm";await t,await(0,o.sB)([s,f,"yas.ort"],(e=>y(e)),r);const p={map:d.Z,characters:u.Z,amos:(0,l.Z)(c.ag.amos),params:(0,l.Z)(c.ag.atifactParams)};await Promise.all([e.setResources(a.ZP),n.setResources(a.ZP),e.initMap(p),n.initMap(p)]),y(100)}catch(s){throw y(-1),s}t.removeEventListener("error",E),r.removeEventListener("error",E),await Promise.all([e.init(),n.init()])})();return{onScreenShot:s,onScreenShot2:g,initPromise:S,workerCV:e,workerOCR:n,onProgress:v,IMatFromImageElement:f.eW,diffAB:w,diffCached:m,diffCachedA:h}}let h;function w(){return h||(h=m()),h}},87325:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(61583);function a(e,t,n,a,o,s){const i=(0,r.up)("router-view"),c=(0,r.up)("Loader");return e.done?((0,r.wg)(),(0,r.j4)(i,{key:0})):((0,r.wg)(),(0,r.j4)(c,{key:1,source:e.source,instance:e.instance,onDone:t[0]||(t[0]=t=>e.done=!0)},null,8,["source","instance"]))}var o=n(30926),s=n(96181),i=(0,r.aZ)({components:{Loader:s.Z},props:{source:{type:String,required:!0},instance:{type:Function,required:!0}},setup(){return{done:(0,o.iH)(!1)}}}),c=n(14545);const u=(0,c.Z)(i,[["render",a]]);var d=u},74672:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var r=n(61583);function a(e,t,n,a,o,s){const i=(0,r.up)("Router");return(0,r.wg)(),(0,r.j4)(i,{source:"artifact",instance:e.getScannerInstance},null,8,["instance"])}var o=n(87325),s=n(13042),i=(0,r.aZ)({components:{Router:o.Z},setup(){return{getScannerInstance:s.zG}}}),c=n(14545);const u=(0,c.Z)(i,[["render",a]]);var d=u},35512:function(e,t,n){n.d(t,{Jj:function(){return f},Ud:function(){return m}});n(23662),n(77253),n(16329);const r=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),s=Symbol("Comlink.thrown"),i=e=>"object"===typeof e&&null!==e||"function"===typeof e,c={canHandle:e=>i(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return f(e,t),[n,[n]]},deserialize(e){return e.start(),m(e)}},u={canHandle:e=>i(e)&&s in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}},d=new Map([["proxy",c],["throw",u]]);function f(e,t=self){t.addEventListener("message",(function n(r){if(!r||!r.data)return;const{id:a,type:o,path:i}=Object.assign({path:[]},r.data),c=(r.data.argumentList||[]).map(k);let u;try{const t=i.slice(0,-1).reduce(((e,t)=>e[t]),e),n=i.reduce(((e,t)=>e[t]),e);switch(o){case"GET":u=n;break;case"SET":t[i.slice(-1)[0]]=k(r.data.value),u=!0;break;case"APPLY":u=n.apply(t,c);break;case"CONSTRUCT":{const e=new n(...c);u=S(e)}break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;f(e,n),u=E(t,[t])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[s]:0}}Promise.resolve(u).catch((e=>({value:e,[s]:0}))).then((e=>{const[r,s]=b(e);t.postMessage(Object.assign(Object.assign({},r),{id:a}),s),"RELEASE"===o&&(t.removeEventListener("message",n),p(t))}))})),t.start&&t.start()}function l(e){return"MessagePort"===e.constructor.name}function p(e){l(e)&&e.close()}function m(e,t){return w(e,[],t)}function h(e){if(e)throw new Error("Proxy has been released and is not useable")}function w(e,t=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(n,a){if(h(r),a===o)return()=>C(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{p(e),r=!0}));if("then"===a){if(0===t.length)return{then:()=>s};const n=C(e,{type:"GET",path:t.map((e=>e.toString()))}).then(k);return n.then.bind(n)}return w(e,[...t,a])},set(n,a,o){h(r);const[s,i]=b(o);return C(e,{type:"SET",path:[...t,a].map((e=>e.toString())),value:s},i).then(k)},apply(n,o,s){h(r);const i=t[t.length-1];if(i===a)return C(e,{type:"ENDPOINT"}).then(k);if("bind"===i)return w(e,t.slice(0,-1));const[c,u]=y(s);return C(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:c},u).then(k)},construct(n,a){h(r);const[o,s]=y(a);return C(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:o},s).then(k)}});return s}function g(e){return Array.prototype.concat.apply([],e)}function y(e){const t=e.map(b);return[t.map((e=>e[0])),g(t.map((e=>e[1])))]}const v=new WeakMap;function E(e,t){return v.set(e,t),e}function S(e){return Object.assign(e,{[r]:!0})}function b(e){for(const[t,n]of d)if(n.canHandle(e)){const[r,a]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},a]}return[{type:"RAW",value:e},v.get(e)||[]]}function k(e){switch(e.type){case"HANDLER":return d.get(e.name).deserialize(e.value);case"RAW":return e.value}}function C(e,t,n){return new Promise((r=>{const a=L();e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)}))}function L(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}},40586:function(e,t,n){var r=n(81319),a=1,o=4;function s(e){return(0,r.Z)(e,a|o)}t["Z"]=s}}]);
//# sourceMappingURL=8691.8e62cb1a.js.map