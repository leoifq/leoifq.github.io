"use strict";(self["define"]=self["define"]||[]).push([[5946],{35200:function(e,n,t){t.d(n,{zG:function(){return f}});var r=t(35512),a=t(19390),s=t(44847),o=t(7728),i=t(28341),c=t(63294),l=t(3146),u=t(40586);function m(){const e=(0,o.G)((()=>(console.log("[worker-macro] webpack"),new o.G(new URL(t.p+t.u(1584),t.b))))),n=(0,r.Ud)(e);return{worker:n,_worker:e}}function d(){const{worker:e,_worker:n}=m(),{worker:t,_worker:r}=m(),{scannerOnImage:o,scannerOnLine:d,recognizeAchievement:p}=e,{recognizeAchievement:f,scannerOnLine:h}=t;let v=(e,n)=>{};const w=e=>{v=e},g=e=>{throw v(-99),e};n.addEventListener("error",g),r.addEventListener("error",g);const y=(async()=>{try{const[n,r]=(0,s.LS)(),o=i.hasSIMD?"ort-wasm-simd.wasm":"ort-wasm.wasm",m=i.hasSIMD?"opencv-simd.wasm":"opencv-normal.wasm";await n,await(0,s.sB)([o,m,"ppocr.ort"],(e=>v(e)),r);const d=(0,u.Z)(l.ag.amos);await Promise.all([e.setResources(a.ZP),t.setResources(a.ZP),e.initAchievementMap(c["default"],d),t.initAchievementMap(c["default"],d)]),v(100)}catch(o){throw v(-1,o),o}n.removeEventListener("error",g),r.removeEventListener("error",g),await Promise.all([e.init(),t.init()])})();return{recognizeAchievement:f,recognizeAchievement2:p,scannerOnLine:h,scannerOnLine2:d,scannerOnImage:o,initPromise:y,workerCV:e,workerOCR:t,onProgress:w}}let p;function f(){return p||(p=d()),p}},78099:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var r=t(61583),a=t(91239);const s=(0,r._)("h1",null,[(0,r.Uk)(" 椰羊·成就扫描 "),(0,r._)("small",null,"请选择扫描方式")],-1),o={class:"method-list"},i=(0,r.Uk)(" 读屏扫描 "),c={key:0},l=(0,r._)("div",null,"滚动页面自动扫描",-1),u=(0,r._)("div",null,"推荐电脑用户使用",-1),m=[l,u],d={key:1,style:{color:"#fe6565"}},p=(0,r._)("div",null,"暂不支持该浏览器",-1),f=(0,r._)("div",{style:{"font-size":"12px"}},"请换用 Chrome 或 Edge",-1),h=[p,f],v=(0,r.Uk)(" 录屏识别 "),w={key:0},g=(0,r._)("div",null,"上传录屏文件识别",-1),y=(0,r._)("div",null,"手机用户可以选择",-1),k=[g,y],E={key:1,style:{color:"#fe6565"}},_=(0,r._)("div",null,"暂不支持该浏览器",-1),b={style:{"font-size":"12px"}},C={class:"line-entrance"},S=(0,r._)("h2",null,"截图识别",-1),L=(0,r._)("small",null,"手动截图上传识别",-1),O=(0,r._)("h2",null,"图片集识别",-1),A=(0,r._)("small",null,"导入第三方扫描器的图片结果",-1);function P(e,n,t,l,u,p){const f=(0,r.up)("Loader"),g=(0,r.up)("fa-icon"),y=(0,r.up)("router-link"),P=(0,r.up)("FooterComponent");return(0,r.wg)(),(0,r.iD)("div",null,[e.load?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,a.C_)(e.$style.scannerEntrance)},[s,(0,r._)("div",o,[(0,r.Wm)(y,{to:{name:"frames.achievement.scan.capture-scanner",params:{direct:!0}},class:(0,a.C_)(["one",{disabled:!e.scannerCompatible}])},{default:(0,r.w5)((()=>[(0,r._)("i",null,[(0,r.Wm)(g,{icon:"desktop"})]),(0,r._)("h2",null,[i,e.scannerCompatible?((0,r.wg)(),(0,r.iD)("small",c,m)):((0,r.wg)(),(0,r.iD)("small",d,h))])])),_:1},8,["to","class"]),(0,r.Wm)(y,{class:(0,a.C_)(["one",{disabled:!e.hasRequestVideoFrameCallback}]),to:{name:"frames.achievement.scan.rvfc-scanner"}},{default:(0,r.w5)((()=>[(0,r._)("i",null,[(0,r.Wm)(g,{icon:"photo-film"})]),(0,r._)("h2",null,[v,e.hasRequestVideoFrameCallback?((0,r.wg)(),(0,r.iD)("small",w,k)):((0,r.wg)(),(0,r.iD)("small",E,[_,(0,r._)("div",b,(0,a.zw)(e.isIOS?"仅支持 iOS 15.4 及以上":"请换用 Chrome 或 Edge"),1)]))])])),_:1},8,["to","class"])]),(0,r._)("div",C,[(0,r.Wm)(y,{to:{name:"frames.achievement.scan.screenshot-scanner"}},{default:(0,r.w5)((()=>[(0,r._)("i",null,[(0,r.Wm)(g,{icon:"crop-simple"})]),S,L])),_:1},8,["to"]),(0,r.Wm)(y,{to:{name:"frames.achievement.scan.line-scanner"}},{default:(0,r.w5)((()=>[(0,r._)("i",null,[(0,r.Wm)(g,{icon:"clipboard-list"})]),O,A])),_:1},8,["to"])]),(0,r.Wm)(P,{name:"成就"})],2)):((0,r.wg)(),(0,r.j4)(f,{key:0,source:"achievement",instance:e.getScannerInstance,onDone:n[0]||(n[0]=n=>e.load=!0)},null,8,["instance"]))])}var R=t(30926),z=t(96181),M=t(29067),D=t(28341),I=t(84876),T=t(2849),W=t(35200);I.vI.add(T.tc$,T.B_A,T.OGB,T.nTQ);var j=(0,r.aZ)({components:{Loader:z.Z,FooterComponent:M.Z},setup(){const e=(0,R.iH)(!1);return{load:e,isIOS:D.isIOS,scannerCompatible:D.scannerCompatible,getScannerInstance:W.zG,hasRequestVideoFrameCallback:D.hasRequestVideoFrameCallback}}}),N={scannerEntrance:"scanner-entrance-dca5e5"},Z=t(14545);const G={};G["$style"]=N;const U=(0,Z.Z)(j,[["render",P],["__cssModules",G]]);var x=U},35512:function(e,n,t){t.d(n,{Jj:function(){return m},Ud:function(){return f}});t(23662),t(77253),t(16329);const r=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),s=Symbol("Comlink.releaseProxy"),o=Symbol("Comlink.thrown"),i=e=>"object"===typeof e&&null!==e||"function"===typeof e,c={canHandle:e=>i(e)&&e[r],serialize(e){const{port1:n,port2:t}=new MessageChannel;return m(e,n),[t,[t]]},deserialize(e){return e.start(),f(e)}},l={canHandle:e=>i(e)&&o in e,serialize({value:e}){let n;return n=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[n,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}},u=new Map([["proxy",c],["throw",l]]);function m(e,n=self){n.addEventListener("message",(function t(r){if(!r||!r.data)return;const{id:a,type:s,path:i}=Object.assign({path:[]},r.data),c=(r.data.argumentList||[]).map(b);let l;try{const n=i.slice(0,-1).reduce(((e,n)=>e[n]),e),t=i.reduce(((e,n)=>e[n]),e);switch(s){case"GET":l=t;break;case"SET":n[i.slice(-1)[0]]=b(r.data.value),l=!0;break;case"APPLY":l=t.apply(n,c);break;case"CONSTRUCT":{const e=new t(...c);l=E(e)}break;case"ENDPOINT":{const{port1:n,port2:t}=new MessageChannel;m(e,t),l=k(n,[n])}break;case"RELEASE":l=void 0;break;default:return}}catch(u){l={value:u,[o]:0}}Promise.resolve(l).catch((e=>({value:e,[o]:0}))).then((e=>{const[r,o]=_(e);n.postMessage(Object.assign(Object.assign({},r),{id:a}),o),"RELEASE"===s&&(n.removeEventListener("message",t),p(n))}))})),n.start&&n.start()}function d(e){return"MessagePort"===e.constructor.name}function p(e){d(e)&&e.close()}function f(e,n){return v(e,[],n)}function h(e){if(e)throw new Error("Proxy has been released and is not useable")}function v(e,n=[],t=function(){}){let r=!1;const o=new Proxy(t,{get(t,a){if(h(r),a===s)return()=>C(e,{type:"RELEASE",path:n.map((e=>e.toString()))}).then((()=>{p(e),r=!0}));if("then"===a){if(0===n.length)return{then:()=>o};const t=C(e,{type:"GET",path:n.map((e=>e.toString()))}).then(b);return t.then.bind(t)}return v(e,[...n,a])},set(t,a,s){h(r);const[o,i]=_(s);return C(e,{type:"SET",path:[...n,a].map((e=>e.toString())),value:o},i).then(b)},apply(t,s,o){h(r);const i=n[n.length-1];if(i===a)return C(e,{type:"ENDPOINT"}).then(b);if("bind"===i)return v(e,n.slice(0,-1));const[c,l]=g(o);return C(e,{type:"APPLY",path:n.map((e=>e.toString())),argumentList:c},l).then(b)},construct(t,a){h(r);const[s,o]=g(a);return C(e,{type:"CONSTRUCT",path:n.map((e=>e.toString())),argumentList:s},o).then(b)}});return o}function w(e){return Array.prototype.concat.apply([],e)}function g(e){const n=e.map(_);return[n.map((e=>e[0])),w(n.map((e=>e[1])))]}const y=new WeakMap;function k(e,n){return y.set(e,n),e}function E(e){return Object.assign(e,{[r]:!0})}function _(e){for(const[n,t]of u)if(t.canHandle(e)){const[r,a]=t.serialize(e);return[{type:"HANDLER",name:n,value:r},a]}return[{type:"RAW",value:e},y.get(e)||[]]}function b(e){switch(e.type){case"HANDLER":return u.get(e.name).deserialize(e.value);case"RAW":return e.value}}function C(e,n,t){return new Promise((r=>{const a=S();e.addEventListener("message",(function n(t){t.data&&t.data.id&&t.data.id===a&&(e.removeEventListener("message",n),r(t.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},n),t)}))}function S(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}},40586:function(e,n,t){var r=t(81319),a=1,s=4;function o(e){return(0,r.Z)(e,a|s)}n["Z"]=o}}]);
//# sourceMappingURL=5946.cc59e44a.js.map