(self["define"]=self["define"]||[]).push([[6880],{61358:function(t){function e(t,e){var s,a,i,n,r,c,l,o;s=3&t.length,a=t.length-s,i=e,r=3432918353,c=461845907,o=0;while(o<a)l=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24,++o,l=(65535&l)*r+(((l>>>16)*r&65535)<<16)&4294967295,l=l<<15|l>>>17,l=(65535&l)*c+(((l>>>16)*c&65535)<<16)&4294967295,i^=l,i=i<<13|i>>>19,n=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=27492+(65535&n)+((58964+(n>>>16)&65535)<<16);switch(l=0,s){case 3:l^=(255&t.charCodeAt(o+2))<<16;case 2:l^=(255&t.charCodeAt(o+1))<<8;case 1:l^=255&t.charCodeAt(o),l=(65535&l)*r+(((l>>>16)*r&65535)<<16)&4294967295,l=l<<15|l>>>17,l=(65535&l)*c+(((l>>>16)*c&65535)<<16)&4294967295,i^=l}return i^=t.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0}t.exports=e},5743:function(t,e,s){"use strict";s.d(e,{n:function(){return r}});var a=s(95144),i=s(61358),n=s.n(i);function r(t){const e={set:t.set.toString(),slot:t.slot.toString(),level:t.level.toString(),stars:t.stars.toString(),mk:t.mainstat.key.toString(),mt:t.mainstat.type.toString()};for(let a=0;a<4;a++)e[`sk${a}`]=t.substat[a]?t.substat[a].key.toString():"",e[`st${a}`]=t.substat[a]?t.substat[a].type.toString():"",e[`sv${a}`]=t.substat[a]?t.substat[a].value.toString():"";const s=(0,a.stringify)(e,{sort:(t,e)=>t.localeCompare(e)});return t.hash=n()(s).toString(16),t.hash}},13042:function(t,e,s){"use strict";s.d(e,{zG:function(){return v}});var a=s(35512),i=s(19390),n=s(44847),r=s(7728),c=s(28341),l=s(3146),o=s(65015),h=s(97939),d=s(87860),u=s(40586);function w(){const t=(0,r.G)((()=>(console.log("[worker-macro] webpack"),new r.G(new URL(s.p+s.u(1168),s.b))))),e=(0,a.Ud)(t);return{worker:e,_worker:t}}function p(){const{worker:t,_worker:e}=w(),{worker:s,_worker:a}=w(),{onScreenShot:r,diffCached:p,diffCachedA:f,diffAB:v}=t,{onScreenShot:g}=s;let y=t=>{};const m=t=>{y=t},k=t=>{throw y(-99),t};e.addEventListener("error",k),a.addEventListener("error",k);const b=(async()=>{try{const[e,a]=(0,n.LS)(),r=c.hasSIMD?"ort-wasm-simd.wasm":"ort-wasm.wasm",d=c.hasSIMD?"opencv-simd.wasm":"opencv-normal.wasm";await e,await(0,n.sB)([r,d,"yas.ort"],(t=>y(t)),a);const w={map:h.Z,characters:o.Z,amos:(0,u.Z)(l.ag.amos),params:(0,u.Z)(l.ag.atifactParams)};await Promise.all([t.setResources(i.ZP),s.setResources(i.ZP),t.initMap(w),s.initMap(w)]),y(100)}catch(r){throw y(-1),r}e.removeEventListener("error",k),a.removeEventListener("error",k),await Promise.all([t.init(),s.init()])})();return{onScreenShot:r,onScreenShot2:g,initPromise:b,workerCV:t,workerOCR:s,onProgress:m,IMatFromImageElement:d.eW,diffAB:v,diffCached:p,diffCachedA:f}}let f;function v(){return f||(f=p()),f}},78750:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return vt}});var a=s(61583),i=s(91239);function n(t,e,s,n,r,c){const l=(0,a.up)("c-ready"),o=(0,a.up)("c-progress"),h=(0,a.up)("float-content-b"),d=(0,a.up)("web-capturer");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",{class:(0,i.C_)(t.$style.scannerUi)},[3===t.step?((0,a.wg)(),(0,a.j4)(l,{key:0})):t.step>3?((0,a.wg)(),(0,a.j4)(o,{key:1})):(0,a.kq)("",!0),((0,a.wg)(),(0,a.j4)(d,{key:t.capKey,ref:"cap",popup:t.step>2&&t.step<5,onExit:e[0]||(e[0]=e=>t.step>3?t.step=5:t.reset()),onReady:e[1]||(e[1]=e=>t.step=3)},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{state:4===t.step?1:0,success:t.resT.length,fail:t.resF.length,scanned:t.scanned,duplicate:t.duplicates,webControlEnabled:t.windowId>0?1:void 0},null,8,["state","success","fail","scanned","duplicate","webControlEnabled"])])),_:1},8,["popup"]))],2)])}var r=s(30926),c=(s(77253),s(25766),s(50673)),l=s(25194),o=s(87860),h=s(13042),d=s(1533),u=s.n(d),w=s(5743),p=s(40),f=s.n(p);const v=document.createElement("canvas");let g=new AbortController;const y=(0,c.Q_)("artifact-capture-scanner",{state:()=>(g.abort(),g=new AbortController,{step:1,capKey:Date.now(),scanner:null,cap:null,panelRect:{x:0,y:0,width:0,height:0},centerRect:{x:0,y:0,width:0,height:0},countRect:{x:0,y:0,width:0,height:0},blocks:null,rawBlocks:null,rectx1:0,recty1:0,cols:0,rows:0,renderLatancy:0,queue:null,results:[],resultHashes:[],scanned:0,duplicates:0,cachedScroll:0,last:!1,lastBeforPaged:null}),getters:{resF:t=>t.results.filter((t=>!t.success)),resT:t=>t.results.filter((t=>t.success))},actions:{capture(){if(!this.cap)throw new Error("No video");return this.cap.capture({x:0,y:0,w:0,h:0})},capturePanel(){if(!this.cap)throw new Error("No video");return this.cap.capture({x:this.panelRect.x,y:this.panelRect.y,w:this.panelRect.width,h:this.panelRect.height})},async scrollCheckBlocks(t,e){if(!this.scanner)throw new Error("No scanner");if(t&&e){const s=await this.scanner.diffAB({rows:t.rows,cols:t.cols,data:t.data,type:t.type},{rows:e.rows,cols:e.cols,data:e.data,type:e.type});if(console.log("->drag-diff="+s),s<100)return this.last=!0,console.log("->paging-done"),!0}else console.log("->drag-diff=-1 (maybe first time)");return!1},async scrollToNext(){if(!this.scanner||!this.cap)throw new Error("No scanner");if(this.cap.windowId<=0)return;if(console.log("->drag-scroll"),await this.getBlocks(!0),!this.rawBlocks)throw new Error("No blocks");this.cap.onFrame((()=>{}));const t={x:this.centerRect.x+this.rawBlocks.x[0],y:this.centerRect.y+this.rawBlocks.y[this.rawBlocks.y.length-1]},e={x:this.centerRect.x+this.rawBlocks.x[0],y:0};await f()(50),await this.cap.drag(t,e,1500,20,400);const s=this.lastBeforPaged;await f()(600),await this.getBlocks(!0);const a=this.lastBeforPaged;await this.scrollCheckBlocks(s,a)},async getBlocks(t=!1){if(!this.cap)throw new Error("No video");if(!this.scanner)throw new Error("No scanner");const e=this.cap.capture({x:this.centerRect.x,y:this.centerRect.y,w:this.centerRect.width,h:this.centerRect.height});t&&(this.lastBeforPaged=e);const s=await this.scanner.workerCV.analyzeBlocks(e),a=[];for(const i of s.y)for(const t of s.x)a.push({x:t,y:i});this.rectx1=s.x[1],this.recty1=s.y[2],this.rows=s.y.length,this.cols=s.x.length,this.blocks=a,this.rawBlocks=s},async getLatency(){if(!this.cap)throw new Error("No video");if(!this.scanner)throw new Error("No scanner");if(!this.blocks)throw new Error("No blocks scanned");const t=this.blocks[2];if(!t)throw new Error("No blocks left");console.log("-> Latency measurement started");const e=this.cap.click;try{const s=await(0,l.s)(this.scanner.diffCached.bind(this.scanner),this.capturePanel,(async()=>{e(this.centerRect.x+t.x,this.centerRect.y+t.y)}));this.renderLatancy=Math.max(120,Math.min(80,s.latency)),console.log("-> Latency measurement done:",s)}catch(s){console.warn(s),this.renderLatancy=80}},async switcherLoop(){if(!this.cap)throw new Error("No video");if(!this.queue)throw new Error("No queue");if(!this.scanner)throw new Error("No scanner");const t=this.scanner,e=this.queue;while(4===this.step){null===this.blocks&&await this.getBlocks(),this.renderLatancy||await this.getLatency(),await t.diffCached(!1);let s,a=0;this.cap.onFrame((async()=>{if(a++,a%2==0)return;const s=this.capturePanel(),i=await t.diffCached(s);i>5&&(this.scanned++,e.push({image:s,id:this.scanned}))}));while(4===this.step&&this.blocks&&(s=this.blocks.shift()))await this.cap.click(this.centerRect.x+s.x,this.centerRect.y+s.y),await f()(Math.min(70,Math.max(120,this.renderLatancy/2||60)));if(4!==this.step)break;this.blocks&&0===this.blocks.length&&!this.last&&(await this.scrollToNext(),this.blocks=null),this.last&&(this.step=5)}},async waitForSwitch(){if(!this.scanner||!this.cap)throw new Error("No scanner");const t=await(0,l.h)(this.scanner.diffCached.bind(this.scanner),this.capturePanel,{interval:50,threhold:8,signal:g.signal,timeout:5e3});return console.log("->changed",t.result),t.image},async analyzeUI(){if(!this.cap)throw new Error("No video");if(!this.scanner)throw new Error("No scanner");const t=this.capture(),e=await this.scanner.workerCV.analyzeBag(t);this.panelRect=e.panelRect,this.centerRect=e.centerRect,this.countRect=e.countRect,v.width=e.panelRect.width,v.height=e.panelRect.height,await Promise.all([this.scanner.workerCV.setCachedBag(e),this.scanner.workerOCR.setCachedBag(e)]),console.log("->analyzeUI",e)},async scannerLoop(){if(!this.cap)throw new Error("No video");if(this.queue&&this.queue.killAndDrain(),this.queue=u().promise(m.worker,1),await this.analyzeUI(),this.cap.windowId>0)return this.switcherLoop();let t=this.capturePanel();while(4===this.step){t&&(this.scanned++,this.queue.push({image:t,id:this.scanned}));try{t=await this.waitForSwitch()}catch(e){t=await this.capturePanel()}}},async worker({image:t,id:e}){if(!this.scanner)throw new Error("No scanner");if(!this.queue)throw new Error("No queue");if(!t)return;let s=1,a=this.scanner.onScreenShot;2===this.queue.concurrency&&e%2===0&&(a=this.scanner.onScreenShot2,s=2);const i=await a(t),n={...i,image:(0,o.rT)(t).toDataURL()};if(n.success&&n.artifact){if(this.cap&&this.cap.windowId>0&&n.artifact.stars<5)return void(this.step=5);const t=(0,w.n)(n.artifact);this.resultHashes.includes(t)?(this.duplicates++,console.log(`->${s}dup`,n.artifact)):(this.results.push(n),this.resultHashes.push(t))}else this.results.push(n),console.warn(`->${s}fail`,n),(new Image).src=(0,o.rT)(t).toDataURL()}}}),m=y();(0,a.YP)((()=>m.step),(async t=>{return 1===t&&m.cap&&m.cap.reset(),4===t?(m.scanner=(0,h.zG)(),void m.scannerLoop()):5===t?(m.queue&&(m.queue.concurrency=2),console.log("->waiting for queue"),await(null===(e=m.queue)||void 0===e?void 0:e.push({image:null,id:-1})),console.log("->done"),void(m.step=6)):6===t&&m.cap?(g.abort(),g=new AbortController,void m.cap.stop()):void 0;var e}));var k=s(29056),b=(s(60388),s(84136));s(36805);const x={class:"content"},C=(0,a._)("div",{class:"title"},"还差最后一步",-1),S={class:"desc"},R=(0,a.Uk)(" 请手动切换到背包的圣遗物界面，然后点击下面按钮继续 "),E=(0,a._)("br",null,null,-1),I={key:0},B={key:1},N={key:2},P={class:"l"},_={class:"m"},T=(0,a._)("div",{class:"t"},"我已打开圣遗物背包",-1),L={key:0,class:"d"},V={key:1,class:"d"},q={class:"r"};function M(t,e,s,n,r,c){const l=b.v,o=(0,a.up)("fa-icon"),h=k.mi;return(0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(t.$style.ready)},[(0,a._)("div",x,[C,(0,a._)("div",S,[R,E,t.hasPictureInPicture?((0,a.wg)(),(0,a.iD)("div",I,"如果没有看到悬浮窗，请点击页面空白处")):t.windowId>0?((0,a.wg)(),(0,a.iD)("div",B,[(0,a.Wm)(l,{title:"当前浏览器不支持悬浮窗",description:"如需中断扫描，请按 Win 键",type:"error","show-icon":""})])):((0,a.wg)(),(0,a.iD)("div",N,[(0,a.Wm)(l,{title:"当前浏览器不支持悬浮窗",description:"完成翻页后，请点击“停止共享屏幕”按钮或手动回到本窗口点击停止扫描",type:"error","show-icon":""})])),t.windowId>0?((0,a.wg)(),(0,a.j4)(l,{key:3,title:"自动扫描器只扫描五星圣遗物",description:"圣遗物扫描器仍在测试中，如有问题请及时反馈...",type:"warning","show-icon":""})):(0,a.kq)("",!0)])]),(0,a.Wm)(h,{class:"start-btn start-gray",onClick:e[0]||(e[0]=e=>t.step++)},{default:(0,a.w5)((()=>[(0,a._)("div",P,[(0,a.Wm)(o,{icon:"toggle-on"})]),(0,a._)("div",_,[T,t.windowId>0?((0,a.wg)(),(0,a.iD)("div",L,"将自动切换到原神窗口并开始切换")):((0,a.wg)(),(0,a.iD)("div",V,"点击后请回到原神窗口并手动切换圣遗物"))]),(0,a._)("div",q,[(0,a.Wm)(o,{icon:"angle-right"})])])),_:1})],2)}var z=s(84876),A=s(2849),D=s(28341);z.vI.add(A.WZW);var F=(0,a.aZ)({setup(){const t=y();return{hasPictureInPicture:D.hasPictureInPicture,step:(0,r.Vh)(t,"step"),windowId:(0,a.Fl)((()=>{var e;return(null===(e=t.cap)||void 0===e?void 0:e.windowId)||-1}))}}}),Z={ready:"ready-df0c59"},$=s(14545);const W={};W["$style"]=Z;const U=(0,$.Z)(F,[["render",M],["__cssModules",W]]);var H=U;const K={class:"inline-status"},j={key:0,class:"no-box"},G={key:1,class:"pbar"},Y={key:0,class:"pbar-bar-text"};function O(t,e,s,n,r,c){const l=(0,a.up)("float-content");return(0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(t.$style.statusInner),onClick:e[1]||(e[1]=e=>4===t.step&&(t.step=5))},[(0,a._)("div",K,[(0,a.Wm)(l,{"in-float":!1,capture:!1,state:1,success:t.resT.length,fail:t.resF.length,scanned:t.scanned,duplicate:t.duplicates},null,8,["success","fail","scanned","duplicate"])]),4===t.step?((0,a.wg)(),(0,a.iD)("div",j,(0,i.zw)(t.windowId>0?"自动切换进行中":"请手动切换圣遗物，并点这里停止"),1)):(0,a.kq)("",!0),t.step>4?((0,a.wg)(),(0,a.iD)("div",G,[(0,a._)("div",{class:(0,i.C_)(["pbar-bar",{finish:6===t.step}])},[(0,a._)("div",{class:"pbar-bar-in",style:(0,i.j5)({width:(t.resT.length+t.resF.length+t.duplicates)/t.scanned*100+"%"})},null,4),6===t.step?((0,a.wg)(),(0,a.iD)("div",Y,"完成")):(0,a.kq)("",!0)],2),6===t.step?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"restart",onClick:e[0]||(e[0]=(...e)=>t.reset&&t.reset(...e))},"重新开始")):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],2)}var Q=s(41151),J=(0,a.aZ)({components:{FloatContent:Q.Z},setup(){const t=y();return{step:(0,r.Vh)(t,"step"),resT:(0,r.Vh)(t,"resT"),resF:(0,r.Vh)(t,"resF"),scanned:(0,r.Vh)(t,"scanned"),duplicates:(0,r.Vh)(t,"duplicates"),capKey:(0,r.Vh)(t,"capKey"),windowId:(0,a.Fl)((()=>{var e;return(null===(e=t.cap)||void 0===e?void 0:e.windowId)||-1})),reset:()=>t.$reset()}}}),X={statusInner:"status-inner-cb54bb"};const tt={};tt["$style"]=X;const et=(0,$.Z)(J,[["render",O],["__cssModules",tt]]);var st=et;function at(t,e,s,i,n,r){return(0,a.wg)(),(0,a.iD)("div")}const it="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024' fill='%23fff'%3E%3Cpath d='M421.646 361.414v-93.081c0-7.562 2.678-13.996 8.038-19.366 5.354-5.346 11.812-8.022 19.366-8.022h246.373c7.562 0 14.012 2.676 19.356 8.022 5.37 5.372 8.038 11.804 8.038 19.366v246.405c0 7.554-2.668 13.988-8.038 19.358-5.346 5.328-11.794 8.024-19.356 8.024H602.35v202.605c0 10.576-3.736 19.582-11.254 27.102-7.484 7.462-16.514 11.232-27.1 11.232H219.07c-10.574 0-19.616-3.77-27.112-11.232-7.508-7.52-11.254-16.526-11.254-27.102V399.758c0-10.588 3.748-19.594 11.254-27.112 7.496-7.484 16.538-11.232 27.112-11.232h202.573zm0 60.234H279.31c-10.574 0-19.618 3.748-27.112 11.232-7.508 7.52-11.254 16.526-11.254 27.112v224.497c0 10.576 3.748 19.582 11.254 27.102 7.494 7.462 16.538 11.232 27.112 11.232h224.455c10.586 0 19.616-3.77 27.1-11.232 7.52-7.52 11.254-16.526 11.254-27.102V542.118h-93.066c-7.554 0-14.012-2.694-19.366-8.024-5.362-5.37-8.038-11.804-8.038-19.358v-93.088zm87.64-120.47c-7.554 0-14.012 2.678-19.366 8.024-5.362 5.37-8.038 11.804-8.038 19.368v125.936c0 7.554 2.678 13.988 8.038 19.358 5.354 5.33 11.812 8.024 19.366 8.024h125.906c7.562 0 14.012-2.694 19.356-8.024 5.37-5.37 8.037-11.804 8.037-19.358V328.57c0-7.562-2.667-13.996-8.037-19.368-5.346-5.346-11.794-8.024-19.356-8.024H509.288zM225.169 85.038l-49.932-28.83c-14.406-8.319-19.342-26.737-11.024-41.14s26.736-19.343 41.14-11.025l104.332 60.234c14.404 8.318 19.342 26.736 11.024 41.14L260.473 209.75c-8.318 14.406-26.736 19.342-41.14 11.024s-19.342-26.736-11.024-41.14l23.282-40.326c-40.44 15.522-74.804 37.426-103.092 65.712-42.704 42.704-71.337 99.733-85.903 171.087L.002 333.512c14.744-71.535 43.36-128.545 85.85-171.037 36.211-36.212 82.65-62.026 139.315-77.442zm536.998 808.386l49.932 28.828c14.404 8.318 19.342 26.736 11.024 41.14s-26.736 19.342-41.14 11.024L677.651 914.18c-14.404-8.318-19.341-26.736-11.024-41.14l60.236-104.331c8.318-14.404 26.736-19.342 41.14-11.024s19.342 26.736 11.024 41.14l-23.282 40.326c40.44-15.52 74.804-37.424 103.092-65.712 42.704-42.704 71.338-99.734 85.904-171.09l42.591 42.592c-14.744 71.534-43.36 128.548-85.85 171.038-36.211 36.212-82.649 62.025-139.315 77.441z'/%3E%3C/svg%3E",nt="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 1024' fill='%23fff'%3E%3Cpath d='M468.867 212.468a43.133 43.133 0 1 0 86.266 0 43.133 43.133 0 1 0-86.266 0zM468.867 383.4a43.133 43.133 0 1 0 86.266 0 43.133 43.133 0 1 0-86.266 0zM468.867 554.334a43.133 43.133 0 1 0 86.266 0 43.133 43.133 0 1 0-86.266 0zM609.448 651.782L512 749.229l-97.448-97.447c-17.572-17.573-43.132-17.573-59.107 0s-17.573 43.132 0 59.107l127.8 127.8c7.987 7.988 20.767 12.78 30.353 12.78s20.767-4.792 30.352-12.78l127.8-127.8c17.573-17.572 17.573-43.132 0-59.107-19.17-17.573-44.73-17.573-62.302 0z'/%3E%3Cpath d='M555.133 0h-84.668C302.727 0 171.732 132.593 171.732 298.733v426.534c0 166.14 132.592 298.733 298.733 298.733h84.668c166.14 0 298.733-132.593 298.733-298.733V298.733C852.268 132.593 721.273 0 555.133 0zM767.6 723.67c0 119.812-94.253 212.467-212.468 212.467h-84.668c-119.813 0-212.468-94.252-212.468-212.468V298.733c0-119.813 94.253-212.468 212.468-212.468h84.668c119.812 0 212.468 94.253 212.468 212.468V723.67z'/%3E%3C/svg%3E",rt=new Image;rt.src=it;const ct=new Image;ct.src=nt;var lt=(0,a.aZ)({props:{state:Number,success:Number,fail:Number,duplicate:Number,scanned:Number,webControlEnabled:Number},setup(t){const e=(0,a.f3)("canvas");function s(){const t=e.value.getContext("2d");t.textAlign="left",t.fillStyle="#fff",t.fillRect(0,0,e.value.width,e.value.height),t.fillStyle="#7e7e7e",t.fillRect(0,0,.28*e.value.width,e.value.height),t.drawImage(rt,.05*e.value.width,.112*e.value.width,.18*e.value.width,.18*e.value.width),t.fillStyle="#999",t.font=.056*e.value.width+"px 微软雅黑",t.fillText("请切换到游戏窗口",.42*e.value.width,.18*e.value.width),t.fillText("打开圣遗物背包页面",.4*e.value.width,.26*e.value.width)}function i(){const s=e.value.getContext("2d");s.textAlign="left",s.fillStyle="#fff",s.fillRect(0,0,e.value.width,e.value.height),s.fillStyle="#4096fe",s.fillRect(0,0,.28*e.value.width,e.value.height),s.drawImage(ct,.05*e.value.width,.112*e.value.width,.18*e.value.width,.18*e.value.width),s.font=.044*e.value.width+"px 微软雅黑",t.webControlEnabled&&t.webControlEnabled>0?(s.fillText("自动切换进行中，请勿移动鼠标",.348*e.value.width,.292*e.value.width),s.fillText("如需中断，请按 Win 键停止切换",.344*e.value.width,.352*e.value.width)):(s.fillText("手动切换圣遗物 完成后点此结束",.328*e.value.width,.292*e.value.width),s.fillText("尽量不要移动鼠标到圣遗物详情内",.316*e.value.width,.352*e.value.width)),s.fillText("扫描",.34*e.value.width,.092*e.value.width),s.fillStyle="#00b57a",s.fillText("成功",.508*e.value.width,.092*e.value.width),s.fillStyle="#cf0000",s.fillText("失败",.676*e.value.width,.092*e.value.width),s.fillStyle="#999",s.fillText("重复",.844*e.value.width,.092*e.value.width),n()}function n(){if(0===t.state)return;const s=e.value.getContext("2d");s.fillStyle="#fff",s.fillRect(.28*e.value.width,.112*e.value.width,.72*e.value.width,.12*e.value.width),s.font=.08*e.value.width+"px 微软雅黑",s.textAlign="center",s.fillStyle="#4096fe",s.fillText((t.scanned||0).toString(),.38*e.value.width,.2*e.value.width),s.fillStyle="#00b57a",s.fillText((t.success||0).toString(),.552*e.value.width,.2*e.value.width),s.fillStyle="#cf0000",s.fillText((t.fail||0).toString(),.72*e.value.width,.2*e.value.width),s.fillStyle="#999",s.fillText((t.duplicate||0).toString(),.888*e.value.width,.2*e.value.width)}return(0,a.YP)((()=>t.state),(t=>{0===t?s():i()})),(0,a.YP)(t,(()=>{n()}),{deep:!0}),(0,a.bv)((()=>{0===t.state?s():i()})),{}}});const ot=(0,$.Z)(lt,[["render",at]]);var ht=ot,dt=s(14763),ut=(0,a.aZ)({components:{CReady:H,CProgress:st,FloatContentB:ht,WebCapturer:dt.Z},setup(){const t=(0,r.iH)(!1),e=y();return e.$reset(),{load:t,step:(0,r.Vh)(e,"step"),resT:(0,r.Vh)(e,"resT"),resF:(0,r.Vh)(e,"resF"),scanned:(0,r.Vh)(e,"scanned"),duplicates:(0,r.Vh)(e,"duplicates"),capKey:(0,r.Vh)(e,"capKey"),cap:(0,r.Vh)(e,"cap"),windowId:(0,a.Fl)((()=>{var t;return(null===(t=e.cap)||void 0===t?void 0:t.windowId)||-1})),reset:()=>e.$reset()}}}),wt={scannerUi:"scanner-ui-a7d844"};const pt={};pt["$style"]=wt;const ft=(0,$.Z)(ut,[["render",n],["__cssModules",pt]]);var vt=ft}}]);
//# sourceMappingURL=6880.5377398f.js.map