{"version":3,"file":"static/js/7442.102daa1f.js","mappings":"qLAEA,MAAMA,EAAO,CACTC,OAAQC,2BACRC,GAAID,0BAGD,IAAIE,EAAYC,UAAUC,SAASC,WAAW,MAAQ,KAAO,SAC7D,MAAMC,GAAYC,EAAAA,EAAAA,IAAI,IAChBC,GAAWD,EAAAA,EAAAA,IAAI,QACfE,GAAaF,EAAAA,EAAAA,IAAI,IACvB,IAAIG,EACJ,MAAMC,EAAUC,MAAOC,EAAO,GAAIC,EAAS,aACzCJ,IACDA,EAAgBK,EAAYb,GAC5BA,QAAkBQ,SAEhBA,EACCZ,EAAgB,YAAXgB,EAAuBZ,EAAYY,GAAUD,GAEhDE,EAAcH,UACvB,MAAMI,QAAalB,EAAKI,GAAc,UACtC,IACI,MAAMe,QAAYC,MAAMF,GACxB,GAAIC,EAAIE,GAAI,CACR,MAAMC,QAAcH,EAAII,OAIxB,GAHAf,EAAUgB,MAAQF,EAAMG,IACxBf,EAASc,MAAQF,EAAMI,IACvBf,EAAWa,MAAQF,EAAMK,KACrB3B,EAAKsB,EAAMN,QACX,OAAOM,EAAMN,QAGvB,MAAOY,GAEL,OADAC,QAAQC,MAAM,yBAA0BF,GACnB,WAAdxB,EAAyB,KAAO,SAE3C,OAAOA","sources":["webpack://cocogoat-web/./node_modules/.pnpm/ifdef-loader@2.3.2/node_modules/ifdef-loader/ifdef-loader.js"],"sourcesContent":["import { ref } from 'vue'\n\nconst apis = {\n    global: process.env.VUE_APP_APIBASE,\n    cn: process.env.VUE_APP_APIBASECN,\n} as Record<string, string>\n\nexport let apiregion = navigator.language.startsWith('zh') ? 'cn' : 'global'\nexport const apistatus = ref('')\nexport const apicolor = ref('info')\nexport const syncstatus = ref('')\nexport let regionchecked: Promise<string> | undefined\nexport const apibase = async (path = '', region = 'default') => {\n    if (!regionchecked) {\n        regionchecked = checkRegion(apiregion)\n        apiregion = await regionchecked\n    }\n    await regionchecked\n    return apis[region === 'default' ? apiregion : region] + path\n}\nexport const checkRegion = async (apiregion: string) => {\n    const url = (await apis[apiregion]) + '/status'\n    try {\n        const res = await fetch(url)\n        if (res.ok) {\n            const rjson = await res.json()\n            apistatus.value = rjson.msg\n            apicolor.value = rjson.typ\n            syncstatus.value = rjson.smsg\n            if (apis[rjson.region]) {\n                return rjson.region\n            }\n        }\n    } catch (e) {\n        console.error('API Region Probe Faild', e)\n        return apiregion === 'global' ? 'cn' : 'global'\n    }\n    return apiregion\n}\n"],"names":["apis","global","process","cn","apiregion","navigator","language","startsWith","apistatus","ref","apicolor","syncstatus","regionchecked","apibase","async","path","region","checkRegion","url","res","fetch","ok","rjson","json","value","msg","typ","smsg","e","console","error"],"sourceRoot":""}